%h1= @rpm.name

- unless @rpm.summary.blank?
  %h2= "(#{@rpm.summary})"

%h2
  = link_to _('Dependency Tree'), :controller => 'fedorarpms', :action => 'full_deps'
  |
  = link_to _('Timeline (Bugs and Versions)'), stats_path + "/" + @name + "/timeline"

- unless @rpm.ruby_gem.nil?
  = button_to "#{@rpm.ruby_gem.name}.gem", rubygem_path(@rpm.ruby_gem.name),
  :class => 'button btn btn-success', :type => 'button', :method => :get

%div.info
  %h3 RPM Information
  %p
    Source Code:
    = link_to @rpm.source_uri, @rpm.source_uri
  %p
    Git Commits: <strong>#{@rpm.commits}</strong>
  %p
    Up to date:
    - if @rpm.upto_date?
      %span.label.label-success= _('Yes')
    - else
      %span.label.label-danger= _('No')
  - unless @rpm.fedora_user.blank?
    %p
      Maintainer:
      = link_to @rpm.obfuscated_fedora_user,
      fedorarpm_path(@rpm.maintainer + "/by_owner")
  - unless @rpm.description.blank?
    %p
      Description:
    %p
      =@rpm.description

  %div.row
    %div.col-md-6
      %h2
      = _('Versions:')
      %table.table.table-striped.table-condensed.table-bordered
        %thead
          %tr
            -FedoraRpm::FEDORA_VERSIONS.each do |t, g|
              %th= t
            %th= _('Gem Version')
        %tbody
          %tr
            -FedoraRpm::FEDORA_VERSIONS.each do |t, g|
              %td= @rpm.version_for(t)
            %td= @rpm.ruby_gem.version
  %div.row
    %div.col-md-6
      - if @dependencies.blank?
        %label= _('No dependencies')
      - else
        %label= _('Dependencies:')

        %table.table.table-striped.table-condensed.table-bordered
          %thead
            %tr
              %th= _('Package')
              -FedoraRpm::FEDORA_VERSIONS.each do |t, g|
                - if g == 'master'
                  %th= 'Rawhide'
                - else
                  %th= g
              %th= _('Upstream')
          %tbody
            - @dependencies.each do |d|
              %tr
                %td= link_to d.name, fedorarpm_path(d.name)
                -FedoraRpm::FEDORA_VERSIONS.each do |t, g|
                  %td= d.version_for(t)
                %td= d.ruby_gem.version
    %div.col-md-6
      - if @dependents.blank?
        %label= _('No dependents')
      - else
        %label= _('Dependents:')

        %table.table.table-striped.table-condensed.table-bordered
          %thead
            %tr
              %th= _('Package')
              -FedoraRpm::FEDORA_VERSIONS.each do |t, g|
                - if g == 'master'
                  %th= 'Rawhide'
                - else
                  %th= g
              %th= _('Upstream')
          %tbody
            - @dependents.each do |d|
              %tr
                %td= link_to d.name, fedorarpm_path(d.name)
                -FedoraRpm::FEDORA_VERSIONS.each do |t, g|
                  %td= d.version_for(t)
                %td= d.ruby_gem.version
  %div.row
    %div.col-md-6
      %h2
      = _('Bugs:')
      %table.table.table-striped.table-condensed.table-bordered
        %thead
          %tr
            %th= _('ID')
            %th= _('Title')
            %th= _('Review?')
        %tbody
          - @rpm.bugs.each do |b|
            %tr
              %td
                - if b.is_open
                  = link_to b.bz_id, b.url
                - else
                  %strike= link_to b.bz_id, b.url
              %td
                = b.name.truncate(30)
              %td
                - if b.is_review
                  %span.glyphicon.glyphicon-ok

    %div.col-md-6
      %h2
      = _('Builds:')
      %table.table.table-striped.table-condensed.table-bordered
        %thead
          %tr
            %th= _('Build ID')
            %th= _('Title')
        %tbody
          - @rpm.builds.each do |b|
            %tr
              %td
                = link_to b.build_id, b.build_url
              %td
                = b.name.truncate(30)

